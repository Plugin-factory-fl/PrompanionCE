<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PromptProfile™ Prompt Enhancer</title>
    <link rel="stylesheet" href="styles/sidepanel.css" />
    <link rel="stylesheet" href="styles/promptEnhancer.css" />
    <link rel="stylesheet" href="styles/sideChat.css" />
    <link rel="stylesheet" href="styles/LoginMenu.css" />
    <link rel="stylesheet" href="styles/promptLibrary.css" />
    <link rel="stylesheet" href="styles/settingsPanel.css" />
  </head>
  <body>
    <div class="panel">
      <header class="panel__header">
        <div class="panel__brand">
          <div class="brand__mark">
            <img src="Assets/icons/icon48.png" alt="PromptProfile™ logo" class="brand__icon" />
          </div>
          <div class="brand__meta">
            <span class="brand__name">PromptProfile™</span>
            <span class="brand__tagline">AI Prompt Enhancer</span>
          </div>
        </div>
        <div class="panel__actions">
          <button class="btn btn--ghost" id="open-settings" aria-label="Enhancement settings" type="button">
            <svg class="icon icon--gear" viewBox="0 0 24 24" aria-hidden="true">
              <path
                d="M12 9.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5Zm9 2.5a1 1 0 0 1-.76.97l-1.54.35a6.97 6.97 0 0 1-.54 1.3l.9 1.3a1 1 0 0 1-.12 1.27l-1.42 1.42a1 1 0 0 1-1.27.12l-1.3-.9c-.42.22-.86.4-1.31.54l-.35 1.54a1 1 0 0 1-.97.76h-2a1 1 0 0 1-.97-.76l-.35-1.54a6.97 6.97 0 0 1-1.31-.54l-1.3.9a1 1 0 0 1-1.27-.12L3.62 17.9a1 1 0 0 1-.12-1.27l.9-1.3a6.97 6.97 0 0 1-.54-1.3l-1.54-.35A1 1 0 0 1 2 12v-2a1 1 0 0 1 .76-.97l1.54-.35c.14-.45.32-.89.54-1.3l-.9-1.3a1 1 0 0 1 .12-1.27L5.42 3.4a1 1 0 0 1 1.27-.12l1.3.9c.42-.22.86-.4 1.31-.54l.35-1.54A1 1 0 0 1 10.62 2h2a1 1 0 0 1 .97.76l.35 1.54c.45.14.89.32 1.31.54l1.3-.9a1 1 0 0 1 1.27.12l1.42 1.42a1 1 0 0 1 .12 1.27l-.9 1.3c.22.42.4.86.54 1.31l1.54.35A1 1 0 0 1 21 10v2Z"
              />
            </svg>
          </button>
          <button class="btn btn--ghost" id="open-account" aria-label="Account" type="button" style="position: relative;">
            <svg class="icon icon--account" viewBox="0 0 24 24" aria-hidden="true">
              <path
                d="M12 12c2.761 0 5-2.462 5-5.5S14.761 1 12 1 7 3.462 7 6.5 9.239 12 12 12Zm0 2c-3.033 0-9 1.523-9 4.5V21a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-2.5c0-2.977-5.967-4.5-9-4.5Z"
              />
            </svg>
            <svg class="icon icon--crown" id="account-crown-icon" viewBox="0 0 24 24" aria-hidden="true" style="display: none; position: absolute; top: -2px; right: -2px; width: 16px; height: 16px; z-index: 1;">
              <path d="M5 16L3 5l5.5 5L12 4l3.5 6L21 5l-2 11H5zm14 3c0 1.1-.9 2-2 2H7c-1.1 0-2-.9-2-2v-1h14v1z" fill="#FFD700"/>
            </svg>
          </button>
        </div>
      </header>

      <section class="panel__section panel__section--status">
        <div class="status-card">
          <div class="status-card__label">User</div>
          <div class="status-card__value" id="user-status">Not Logged In</div>
          <div class="status-card__plan-row">
            <span class="status-card__label">Plan</span>
            <button class="btn btn--ghost btn--pill btn--upgrade" id="status-upgrade-btn" type="button" style="display: none; opacity: 0;">
              Get Pro
            </button>
          </div>
          <div class="status-card__value" id="user-plan">Freemium</div>
        </div>
        <div class="status-card" id="enhancements-used-card">
          <div class="status-card__label">Enhancements used</div>
          <div class="status-card__value">
            <span id="enhancements-count">3</span>/<span id="enhancements-limit">10</span>
          </div>
        </div>
        <div class="status-card" id="give-feedback-card" style="display: none;">
          <div class="status-card__label">Give Feedback</div>
          <button class="btn btn--primary" id="email-us-button" type="button">Email Us</button>
        </div>
      </section>

      <section class="panel__section panel__section--prompt">
        <details class="section-collapsible">
          <summary class="section-heading">
            <div class="section-heading__title-group">
              <h2>Prompt Enhancer</h2>
              <button class="library-info-btn" id="prompt-enhancer-info-btn" type="button" aria-label="Prompt Enhancer information">
                <span class="library-info-btn__icon">i</span>
              </button>
            </div>
          </summary>

          <div class="section-content">
            <div class="prompt-preview">
              <div class="prompt-preview__header">
                <div class="prompt-tabs" role="tablist">
                  <button class="prompt-tab" role="tab" data-tab="original" aria-selected="false">Original</button>
                  <button class="prompt-tab is-active" role="tab" data-tab="option-a" aria-selected="true">Enhanced</button>
                </div>
                </div>
              
              <div class="prompt-preview__content">
                <div class="prompt-tabpanel" id="original-panel" role="tabpanel" hidden>
                <textarea class="prompt-textarea" id="original-prompt" placeholder="Enter your prompt here..."></textarea>
                <div class="prompt-preview__actions">
                  <button class="btn btn--primary" id="enhance-btn">Enhance Prompt</button>
                  </div>
                </div>
                
                <div class="prompt-tabpanel is-active" id="option-a-panel" role="tabpanel">
                  <textarea class="prompt-textarea" id="option-a"></textarea>
                  <div class="prompt-preview__actions">
                    <button class="btn btn--ghost" data-insert="option-a">Insert</button>
                    <button class="btn btn--ghost" data-regenerate="option-a">Regenerate</button>
                    <button class="btn btn--ghost" data-save-to-library="option-a">Save to Library</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </details>
      </section>

      <section class="panel__section panel__section--chat">
        <details class="section-collapsible">
          <summary class="section-heading">
            <div class="section-heading__title-group">
              <h2>Side Chat</h2>
              <button class="library-info-btn" id="side-chat-info-btn" type="button" aria-label="Side Chat information">
                <span class="library-info-btn__icon">i</span>
              </button>
            </div>
          </summary>
          <div class="section-content">
            <div class="chat-window" id="chat-window">
              <!-- Messages injected via JS -->
            </div>
            <div class="chat-tabs-row">
              <div class="chat-tabs" id="chat-tabs" role="tablist" style="display: none;"></div>
              <button type="button" class="btn btn--ghost chat-reset" id="chat-reset">New Chat</button>
            </div>
            <form class="chat-input" id="chat-form">
              <textarea
                id="chat-message"
                class="chat-input__textarea"
                placeholder="Ask PromptProfile™ for refinements..."
                required
              ></textarea>
              <button type="submit" class="btn btn--primary">Send</button>
            </form>
          </div>
        </details>
      </section>

      <section class="panel__section panel__section--library">
        <details class="section-collapsible" data-section="library">
          <summary class="section-heading">
            <div class="section-heading__title-group">
              <h2>Prompt Library</h2>
              <button class="library-info-btn" id="library-info-btn" type="button" aria-label="Prompt Library information">
                <span class="library-info-btn__icon">i</span>
              </button>
            </div>
            <div class="section-heading__actions">
              <button class="btn btn--ghost btn--pill library-add-folder" id="add-folder" type="button">
                Create New Prompt File
              </button>
            </div>
          </summary>
          <div class="section-content">
            <div class="prompt-library__search-wrapper">
              <input
                type="text"
                id="library-search"
                class="prompt-library__search"
                placeholder="Search prompts..."
                autocomplete="off"
              />
              <button
                type="button"
                id="library-search-clear"
                class="prompt-library__search-clear"
                aria-label="Clear search"
                hidden
              >
                ×
              </button>
            </div>
            <ul class="prompt-library" id="prompt-library">
              <!-- Library items injected via JS -->
            </ul>
          </div>
        </details>
      </section>
    </div>

    <dialog id="settings-dialog" class="modal modal--dark">
      <form method="dialog" class="modal__content">
        <header class="modal__header">
          <h2>Enhancement Settings</h2>
          <button class="btn btn--ghost modal__close" value="cancel" aria-label="Close settings">
            <svg class="icon icon--close" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M7.05 6.34a1 1 0 0 1 1.41 0L12 9.88l3.54-3.54a1 1 0 1 1 1.41 1.41L13.41 11.3l3.54 3.54a1 1 0 0 1-1.41 1.41L12 12.7l-3.54 3.54a1 1 0 0 1-1.41-1.41l3.54-3.54-3.54-3.54a1 1 0 0 1 0-1.41Z" />
            </svg>
          </button>
        </header>
        <div class="modal__body settings-form">
          <div class="form-field form-field--model">
            <span class="form-field__label">AI Model</span>
            <p class="form-field__description" style="margin-top: 0.5rem; color: var(--text-secondary);">
              This extension uses ChatGPT for its AI functionality.
            </p>
          </div>

          <div class="form-field form-field--tabs">
            <span class="form-field__label">Generation Output Type</span>
            <div class="form-tabs" role="tablist" aria-label="Generation output type">
              <button class="form-tab" data-setting="output" data-value="text" type="button">
                Text
              </button>
              <button class="form-tab" data-setting="output" data-value="image" type="button">
                Image
              </button>
              <button class="form-tab" data-setting="output" data-value="video" type="button">
                Video
              </button>
              <button class="form-tab" data-setting="output" data-value="code" type="button">
                Code
              </button>
            </div>
          </div>

          <label class="form-field">
            <span class="form-field__label">Level of Detail</span>
            <input type="range" id="setting-complexity" min="1" max="3" value="2" />
            <span class="range-output" data-for="setting-complexity">Medium</span>
            <span class="form-field__description" id="complexity-description"></span>
          </label>

        </div>
        <footer class="modal__footer">
          <button class="btn btn--ghost" value="cancel">Cancel</button>
          <button class="btn btn--primary" value="confirm">Save</button>
        </footer>
      </form>
    </dialog>

    <dialog id="account-dialog" class="modal modal--dark">
      <!-- Login View (shown when not logged in) -->
      <form class="modal__content account__login-view" id="account-form">
        <header class="modal__header">
          <h2>Log in to your PromptProfile™</h2>
          <button class="btn btn--ghost modal__close account__cancel" value="cancel" aria-label="Close account dialog">
            <svg class="icon icon--close" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M7.05 6.34a1 1 0 0 1 1.41 0L12 9.88l3.54-3.54a1 1 0 1 1 1.41 1.41L13.41 11.3l3.54 3.54a1 1 0 0 1-1.41 1.41L12 12.7l-3.54 3.54a1 1 0 0 1-1.41-1.41l3.54-3.54-3.54-3.54a1 1 0 0 1 0-1.41Z" />
            </svg>
          </button>
        </header>
        <div class="modal__body account__body">
          <label class="form-field">
            <span class="form-field__label">Email</span>
            <input type="email" class="account__input" name="email" autocomplete="email" required />
          </label>
          <label class="form-field">
            <span class="form-field__label">Password</span>
            <div class="account__input-wrapper">
              <input type="password" class="account__input account__input--password" name="password" id="login-password" autocomplete="current-password" required />
              <button type="button" class="account__password-toggle" data-target="login-password" aria-label="Show password">Show</button>
            </div>
          </label>
          <div class="account__error-message" id="login-error-message" hidden></div>
        </div>
        <footer class="modal__footer account__footer">
          <div class="account__footer-links">
            <button type="button" class="account__create-link" id="open-create-account">Create Account</button>
            <button type="button" class="account__forgot-link" id="forgot-password">Forgot Password?</button>
          </div>
          <div class="account__footer-buttons">
          <button class="btn btn--ghost account__cancel" value="cancel">Cancel</button>
            <button type="submit" class="btn btn--primary account__submit" value="login">Log In</button>
          </div>
        </footer>
      </form>

      <!-- Logged In View (shown when user is logged in) -->
      <div class="modal__content account__logged-in-view" id="account-logged-in-view" hidden>
        <header class="modal__header">
          <h2>Account</h2>
          <button class="btn btn--ghost modal__close account__cancel" value="cancel" aria-label="Close account dialog">
            <svg class="icon icon--close" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M7.05 6.34a1 1 0 0 1 1.41 0L12 9.88l3.54-3.54a1 1 0 1 1 1.41 1.41L13.41 11.3l3.54 3.54a1 1 0 0 1-1.41 1.41L12 12.7l-3.54 3.54a1 1 0 0 1-1.41-1.41l3.54-3.54-3.54-3.54a1 1 0 0 1 0-1.41Z" />
            </svg>
          </button>
        </header>
        <div class="modal__body account__logged-in-body">
          <div class="account__user-info">
            <p class="account__logged-in-as">Logged In As: <span id="account-user-name">Loading...</span></p>
            <button type="button" class="account__switch-link" id="switch-account">Switch accounts?</button>
          </div>
          <div class="account__plan-info">
            <p class="account__plan-label">Current Plan: <span id="account-plan-name">FREE</span></p>
            <p class="account__plan-description">On the free plan, you can only enhance prompts 10 times and your conversations are limited with the Side Chat. Upgrade now for unlimited enhancements and side chat conversations.</p>
          </div>
          <button type="button" class="btn btn--primary btn--upgrade" id="upgrade-button">Get PromptProfile Pro</button>
          <button type="button" class="btn btn--primary" id="email-us-account-button" style="display: none;">Email Us</button>
        </div>
      </div>
    </dialog>

    <!-- Status Popup Dialog -->
    <dialog id="status-dialog" class="modal modal--dark status-dialog">
      <div class="modal__content status-dialog__content">
        <div class="status-dialog__loading" id="status-loading" hidden>
          <div class="status-dialog__spinner"></div>
        </div>
      </div>
    </dialog>

    <dialog id="create-account-dialog" class="modal modal--dark">
      <form method="dialog" class="modal__content" id="create-account-form">
        <header class="modal__header">
          <h2>Create PromptProfile™ Account</h2>
          <button class="btn btn--ghost modal__close create-account__cancel" value="cancel" aria-label="Close create account dialog">
            <svg class="icon icon--close" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M7.05 6.34a1 1 0 0 1 1.41 0L12 9.88l3.54-3.54a1 1 0 1 1 1.41 1.41L13.41 11.3l3.54 3.54a1 1 0 0 1-1.41 1.41L12 12.7l-3.54 3.54a1 1 0 0 1-1.41-1.41l3.54-3.54-3.54-3.54a1 1 0 0 1 0-1.41Z" />
            </svg>
          </button>
        </header>
        <div class="modal__body account__body">
          <label class="form-field">
            <span class="form-field__label">Name / Nickname</span>
            <input type="text" class="account__input" name="name" id="create-account-name" autocomplete="name" />
          </label>
          <label class="form-field">
            <span class="form-field__label">Email</span>
            <input type="email" class="account__input" name="email" id="create-account-email" autocomplete="email" required />
          </label>
          <label class="form-field">
            <span class="form-field__label">Password</span>
            <div class="account__input-wrapper">
              <input type="password" class="account__input account__input--password" name="password" id="create-account-password" autocomplete="new-password" required />
              <button type="button" class="account__password-toggle" data-target="create-account-password" aria-label="Show password">Show</button>
            </div>
          </label>
          <label class="form-field">
            <span class="form-field__label">Confirm Password</span>
            <div class="account__input-wrapper">
              <input type="password" class="account__input account__input--password" name="confirmPassword" id="create-account-confirm-password" autocomplete="new-password" required />
              <button type="button" class="account__password-toggle" data-target="create-account-confirm-password" aria-label="Show password">Show</button>
            </div>
          </label>
          <div class="account__error-message" id="create-account-error-message" hidden></div>
        </div>
        <footer class="modal__footer account__footer">
          <div class="account__footer-links">
            <button type="button" class="account__forgot-link" id="create-account-forgot-password">Forgot Password?</button>
          </div>
          <div class="account__footer-buttons">
            <button class="btn btn--ghost create-account__cancel" value="cancel">Cancel</button>
            <button class="btn btn--primary create-account__submit" value="create">Create Account</button>
          </div>
        </footer>
      </form>
    </dialog>

    <!-- Forgot Password Email Dialog -->
    <dialog id="forgot-password-email-dialog" class="modal modal--dark">
      <form method="dialog" class="modal__content" id="forgot-password-email-form">
        <header class="modal__header">
          <h2>Reset Password</h2>
          <button class="btn btn--ghost modal__close forgot-password-email__cancel" value="cancel" aria-label="Close password reset dialog">
            <svg class="icon icon--close" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M7.05 6.34a1 1 0 0 1 1.41 0L12 9.88l3.54-3.54a1 1 0 1 1 1.41 1.41L13.41 11.3l3.54 3.54a1 1 0 0 1-1.41 1.41L12 12.7l-3.54 3.54a1 1 0 0 1-1.41-1.41l3.54-3.54-3.54-3.54a1 1 0 0 1 0-1.41Z" />
            </svg>
          </button>
        </header>
        <div class="modal__body account__body">
          <p style="color: rgba(255, 255, 255, 0.8); margin-bottom: 16px;">Enter the email address associated with your account to reset your password.</p>
          <label class="form-field">
            <span class="form-field__label">Email</span>
            <input type="email" class="account__input" name="email" id="forgot-password-email" autocomplete="email" required />
          </label>
          <div class="account__error-message" id="forgot-password-email-error-message" hidden></div>
        </div>
        <footer class="modal__footer account__footer">
          <div class="account__footer-buttons">
            <button class="btn btn--ghost forgot-password-email__cancel" value="cancel">Cancel</button>
            <button class="btn btn--primary forgot-password-email__submit" type="button" value="submit">Continue</button>
          </div>
        </footer>
      </form>
    </dialog>

    <!-- Forgot Password Reset Dialog -->
    <dialog id="forgot-password-reset-dialog" class="modal modal--dark">
      <form method="dialog" class="modal__content" id="forgot-password-reset-form">
        <header class="modal__header">
          <h2>Set New Password</h2>
          <button class="btn btn--ghost modal__close forgot-password-reset__cancel" value="cancel" aria-label="Close password reset dialog">
            <svg class="icon icon--close" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M7.05 6.34a1 1 0 0 1 1.41 0L12 9.88l3.54-3.54a1 1 0 1 1 1.41 1.41L13.41 11.3l3.54 3.54a1 1 0 0 1-1.41 1.41L12 12.7l-3.54 3.54a1 1 0 0 1-1.41-1.41l3.54-3.54-3.54-3.54a1 1 0 0 1 0-1.41Z" />
            </svg>
          </button>
        </header>
        <div class="modal__body account__body">
          <label class="form-field">
            <span class="form-field__label">New Password</span>
            <div class="account__input-wrapper">
              <input type="password" class="account__input account__input--password" name="newPassword" id="forgot-password-new-password" autocomplete="new-password" required />
              <button type="button" class="account__password-toggle" data-target="forgot-password-new-password" aria-label="Show password">Show</button>
            </div>
          </label>
          <label class="form-field">
            <span class="form-field__label">Confirm New Password</span>
            <div class="account__input-wrapper">
              <input type="password" class="account__input account__input--password" name="confirmNewPassword" id="forgot-password-confirm-password" autocomplete="new-password" required />
              <button type="button" class="account__password-toggle" data-target="forgot-password-confirm-password" aria-label="Show password">Show</button>
            </div>
          </label>
          <div class="account__error-message" id="forgot-password-reset-error-message" hidden></div>
        </div>
        <footer class="modal__footer account__footer">
          <div class="account__footer-buttons">
            <button class="btn btn--ghost forgot-password-reset__cancel" value="cancel">Cancel</button>
            <button class="btn btn--primary forgot-password-reset__submit" type="button" value="submit">Reset Password</button>
          </div>
        </footer>
      </form>
    </dialog>

    <dialog id="library-info-dialog" class="modal modal--dark">
      <form method="dialog" class="modal__content">
        <header class="modal__header">
          <h2>Prompt Library Information</h2>
          <button class="btn btn--ghost modal__close" value="cancel" aria-label="Close information">
            <svg class="icon icon--close" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M7.05 6.34a1 1 0 0 1 1.41 0L12 9.88l3.54-3.54a1 1 0 1 1 1.41 1.41L13.41 11.3l3.54 3.54a1 1 0 0 1-1.41 1.41L12 12.7l-3.54 3.54a1 1 0 0 1-1.41-1.41l3.54-3.54-3.54-3.54a1 1 0 0 1 0-1.41Z" />
            </svg>
          </button>
        </header>
        <div class="modal__body library-info-content">
          <div class="library-info-section">
            <h3 class="library-info-section__title">Storage Capacity</h3>
            <p class="library-info-section__text">
              Your prompts are stored using Chrome Sync Storage, which has a limit of approximately <strong>100KB per item</strong>. 
              You can store up to <strong>200 prompts per folder</strong>, with a practical total capacity of around <strong>200-400 prompts</strong> depending on prompt length.
            </p>
          </div>
          <div class="library-info-section">
            <h3 class="library-info-section__title">Sync Across Devices</h3>
            <p class="library-info-section__text">
              To keep your prompts synchronized across all your devices:
            </p>
            <ol class="library-info-list">
              <li>Make sure you're signed into Chrome with the same Google account on all devices</li>
              <li>Enable Chrome Sync in your browser settings</li>
              <li>Ensure "Extensions" sync is enabled:
                <ul class="library-info-sublist">
                  <li>Go to <strong>chrome://settings/syncSetup</strong> or Chrome Settings → Sync and Google Services</li>
                  <li>Click "Manage what you sync"</li>
                  <li>Make sure "Extensions" is checked</li>
                </ul>
              </li>
            </ol>
            <p class="library-info-section__text">
              Once enabled, your prompt library will automatically sync to all devices where you're signed in.
            </p>
          </div>
        </div>
        <footer class="modal__footer">
          <button class="btn btn--primary" value="confirm">Got it</button>
        </footer>
      </form>
    </dialog>

    <dialog id="prompt-enhancer-info-dialog" class="modal modal--dark">
      <form method="dialog" class="modal__content">
        <header class="modal__header">
          <h2>Prompt Enhancer Information</h2>
          <button class="btn btn--ghost modal__close" value="cancel" aria-label="Close information">
            <svg class="icon icon--close" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M7.05 6.34a1 1 0 0 1 1.41 0L12 9.88l3.54-3.54a1 1 0 1 1 1.41 1.41L13.41 11.3l3.54 3.54a1 1 0 0 1-1.41 1.41L12 12.7l-3.54 3.54a1 1 0 0 1-1.41-1.41l3.54-3.54-3.54-3.54a1 1 0 0 1 0-1.41Z" />
            </svg>
          </button>
        </header>
        <div class="modal__body library-info-content">
          <div class="library-info-section">
            <p class="library-info-section__text">
              The Prompt Enhancer transforms your prompts into more effective versions using AI best practices. Enter your prompt, click "Enhance Prompt" to generate an improved version, then use "Insert" to add it to your conversation. Configure detail level (Low/Medium/High) and output type (Text/Image/Video/Code) in settings.
            </p>
          </div>
        </div>
        <footer class="modal__footer">
          <button class="btn btn--primary" value="confirm">Got it</button>
        </footer>
      </form>
    </dialog>

    <dialog id="side-chat-info-dialog" class="modal modal--dark">
      <form method="dialog" class="modal__content">
        <header class="modal__header">
          <h2>Side Chat Information</h2>
          <button class="btn btn--ghost modal__close" value="cancel" aria-label="Close information">
            <svg class="icon icon--close" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M7.05 6.34a1 1 0 0 1 1.41 0L12 9.88l3.54-3.54a1 1 0 1 1 1.41 1.41L13.41 11.3l3.54 3.54a1 1 0 0 1-1.41 1.41L12 12.7l-3.54 3.54a1 1 0 0 1-1.41-1.41l3.54-3.54-3.54-3.54a1 1 0 0 1 0-1.41Z" />
            </svg>
          </button>
        </header>
        <div class="modal__body library-info-content">
          <div class="library-info-section">
            <p class="library-info-section__text">
              Side Chat helps you understand AI responses directly in your browser without switching pages. Select text from any AI response (ChatGPT, Claude, Gemini, etc.) and click "Elaborate" to open Side Chat with context loaded. Ask questions for clarification or type messages anytime to get context-aware help.
            </p>
          </div>
        </div>
        <footer class="modal__footer">
          <button class="btn btn--primary" value="confirm">Got it</button>
        </footer>
      </form>
    </dialog>

    <dialog id="save-to-library-dialog" class="modal modal--dark">
      <form method="dialog" class="modal__content" id="save-to-library-form">
        <header class="modal__header">
          <h2>Save to Library</h2>
          <button class="btn btn--ghost modal__close save-to-library__cancel" value="cancel" aria-label="Close dialog">
            <svg class="icon icon--close" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M7.05 6.34a1 1 0 0 1 1.41 0L12 9.88l3.54-3.54a1 1 0 1 1 1.41 1.41L13.41 11.3l3.54 3.54a1 1 0 0 1-1.41 1.41L12 12.7l-3.54 3.54a1 1 0 0 1-1.41-1.41l3.54-3.54-3.54-3.54a1 1 0 0 1 0-1.41Z" />
            </svg>
          </button>
        </header>
        <div class="modal__body">
          <label class="form-field">
            <span class="form-field__label">Select Folder</span>
            <select id="save-to-library-folder-select" class="select">
              <option value="">-- Select a folder --</option>
            </select>
          </label>
          <div class="form-field" id="save-to-library-new-folder-wrapper" style="display: none;">
            <label class="form-field">
              <span class="form-field__label">New Folder Name</span>
              <input type="text" id="save-to-library-new-folder-input" class="account__input" autocomplete="off" placeholder="Enter folder name..." />
            </label>
          </div>
          <div class="library-dialog__message" id="save-to-library-message" style="display: none;"></div>
        </div>
        <footer class="modal__footer">
          <button class="btn btn--ghost save-to-library__cancel" type="button" value="cancel">Cancel</button>
          <button class="btn btn--primary" type="button" value="confirm">Save</button>
        </footer>
      </form>
    </dialog>

    <dialog id="library-dialog" class="modal modal--dark">
      <form method="dialog" class="modal__content" id="library-form">
        <header class="modal__header">
          <h2 id="library-dialog-title">Create Item</h2>
          <button
            class="btn btn--ghost modal__close library__cancel library__cancel--header"
            type="button"
            aria-label="Close library dialog"
          >
            <svg class="icon icon--close" viewBox="0 0 24 24" aria-hidden="true">
              <path
                d="M7.05 6.34a1 1 0 0 1 1.41 0L12 9.88l3.54-3.54a1 1 0 1 1 1.41 1.41L13.41 11.3l3.54 3.54a1 1 0 0 1-1.41 1.41L12 12.7l-3.54 3.54a1 1 0 0 1-1.41-1.41l3.54-3.54-3.54-3.54a1 1 0 0 1 0-1.41Z"
              />
            </svg>
          </button>
        </header>
        <div class="modal__body library-dialog__body">
          <label class="form-field library-dialog__field" id="library-input-wrapper">
            <span class="form-field__label" id="library-input-label">Name</span>
            <input type="text" id="library-input" autocomplete="off" />
          </label>
          <div class="library-dialog__message" id="library-message"></div>
          <label
            class="form-field library-dialog__field library-dialog__field--textarea"
            id="library-textarea-wrapper"
          >
            <span class="form-field__label" id="library-textarea-label">Prompt</span>
            <textarea id="library-textarea" rows="6" placeholder="Describe the prompt..."></textarea>
          </label>
        </div>
        <footer class="modal__footer library-dialog__footer">
          <button
            class="btn btn--ghost library__cancel library__cancel--footer"
            type="button"
            value="cancel"
          >
            Cancel
          </button>
          <button class="btn btn--primary" value="confirm">Save</button>
        </footer>
      </form>
    </dialog>

    <template id="library-folder-template">
      <li class="prompt-library__folder">
        <details>
          <summary class="prompt-library__summary">
            <div class="prompt-library__summary-main">
              <div class="prompt-library__summary-title">
                <span class="prompt-library__title"></span>
                <span class="prompt-library__count"></span>
              </div>
            </div>
            <div class="prompt-library__summary-actions">
              <button
                class="btn btn--ghost btn--pill prompt-library__action"
                data-action="add-prompt"
                type="button"
              >
                Create New Prompt
              </button>
              <button
                class="btn btn--ghost btn--pill prompt-library__action"
                data-action="edit-folder"
                type="button"
                aria-label="Edit folder name"
              >
                Edit
              </button>
              <button
                class="btn btn--ghost btn--icon prompt-library__action prompt-library__action--danger"
                data-action="delete-folder"
                type="button"
                aria-label="Delete prompt folder"
              >
                <span aria-hidden="true">×</span>
              </button>
              <span class="prompt-library__caret" aria-hidden="true"></span>
            </div>
          </summary>
          <ul class="prompt-library__prompts"></ul>
        </details>
      </li>
    </template>

    <template id="library-prompt-template">
      <li class="prompt-library__item">
        <div class="prompt-library__text"></div>
        <div class="prompt-library__actions">
          <button class="btn btn--ghost btn--pill prompt-library__use" data-action="use" type="button">
            Insert
          </button>
          <button class="btn btn--ghost btn--pill prompt-library__copy" data-action="copy" type="button">
            Copy
          </button>
          <button class="btn btn--ghost btn--pill prompt-library__edit" data-action="edit-prompt" type="button">
            Edit
          </button>
          <button
            class="btn btn--ghost btn--pill prompt-library__delete"
            data-action="delete"
            type="button"
          >
            Delete
          </button>
        </div>
      </li>
    </template>

    <script type="module" src="scripts/sidepanel.js"></script>
  </body>
</html>

